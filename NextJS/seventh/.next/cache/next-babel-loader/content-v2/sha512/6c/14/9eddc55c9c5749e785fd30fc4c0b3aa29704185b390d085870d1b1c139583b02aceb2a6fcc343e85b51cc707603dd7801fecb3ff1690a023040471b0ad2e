{"ast":null,"code":"import fs from \"fs\";\nimport path from \"path\";\n\nfunction getFeedbackFilePath() {\n  return path.join(process.cwd(), \"data\", \"feedback.json\");\n}\n\nexport function getAllFeedback() {\n  const filePath = getFeedbackFilePath();\n  const fileData = fs.readFileSync(filePath);\n  return JSON.parse(fileData);\n}\nexport function getFeedbackById(id) {\n  const data = getAllFeedback();\n  const feedback = data.filter(f => f.id == id);\n  return feedback;\n}\n\nfunction handler(req, res) {\n  if (req.method == \"POST\") {\n    const email = req.body.email;\n    const text = req.body.text;\n    const newFeedback = {\n      id: new Date().toISOString(),\n      email: email,\n      text: text\n    };\n    const data = getAllFeedback();\n    data.push(newFeedback);\n    const filePath = getFeedbackFilePath();\n    fs.writeFileSync(filePath, JSON.stringify(data));\n    res.status(201).json({\n      message: \"Success, data file updated\",\n      newFeedback: newFeedback\n    });\n  } else if (req.method == \"GET\") {\n    const data = getAllFeedback();\n    res.status(201).json({\n      message: \"Success, data file retrieved\",\n      allFeedback: data\n    });\n  } else {\n    res.status(200).json({\n      message: \"This works!\"\n    });\n  }\n}\n\nexport default handler;","map":{"version":3,"sources":["/Users/GK47LX/source/JSStudies/NextJS/seventh/pages/api/feedback/index.js"],"names":["fs","path","getFeedbackFilePath","join","process","cwd","getAllFeedback","filePath","fileData","readFileSync","JSON","parse","getFeedbackById","id","data","feedback","filter","f","handler","req","res","method","email","body","text","newFeedback","Date","toISOString","push","writeFileSync","stringify","status","json","message","allFeedback"],"mappings":"AAAA,OAAOA,EAAP,MAAe,IAAf;AACA,OAAOC,IAAP,MAAiB,MAAjB;;AAEA,SAASC,mBAAT,GAA+B;AAC9B,SAAOD,IAAI,CAACE,IAAL,CAAUC,OAAO,CAACC,GAAR,EAAV,EAAyB,MAAzB,EAAiC,eAAjC,CAAP;AACA;;AAED,OAAO,SAASC,cAAT,GAA0B;AAChC,QAAMC,QAAQ,GAAGL,mBAAmB,EAApC;AACA,QAAMM,QAAQ,GAAGR,EAAE,CAACS,YAAH,CAAgBF,QAAhB,CAAjB;AACA,SAAOG,IAAI,CAACC,KAAL,CAAWH,QAAX,CAAP;AACA;AAED,OAAO,SAASI,eAAT,CAAyBC,EAAzB,EAA4B;AAC/B,QAAMC,IAAI,GAAGR,cAAc,EAA3B;AACA,QAAMS,QAAQ,GAAGD,IAAI,CAACE,MAAL,CAAYC,CAAC,IAAEA,CAAC,CAACJ,EAAF,IAAQA,EAAvB,CAAjB;AACA,SAAOE,QAAP;AACH;;AAED,SAASG,OAAT,CAAiBC,GAAjB,EAAsBC,GAAtB,EAA2B;AAC1B,MAAID,GAAG,CAACE,MAAJ,IAAc,MAAlB,EAA0B;AACzB,UAAMC,KAAK,GAAGH,GAAG,CAACI,IAAJ,CAASD,KAAvB;AACA,UAAME,IAAI,GAAGL,GAAG,CAACI,IAAJ,CAASC,IAAtB;AAEA,UAAMC,WAAW,GAAG;AACnBZ,MAAAA,EAAE,EAAE,IAAIa,IAAJ,GAAWC,WAAX,EADe;AAEnBL,MAAAA,KAAK,EAAEA,KAFY;AAGnBE,MAAAA,IAAI,EAAEA;AAHa,KAApB;AAMA,UAAMV,IAAI,GAAGR,cAAc,EAA3B;AACAQ,IAAAA,IAAI,CAACc,IAAL,CAAUH,WAAV;AACA,UAAMlB,QAAQ,GAAGL,mBAAmB,EAApC;AACAF,IAAAA,EAAE,CAAC6B,aAAH,CAAiBtB,QAAjB,EAA2BG,IAAI,CAACoB,SAAL,CAAehB,IAAf,CAA3B;AACAM,IAAAA,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACpBC,MAAAA,OAAO,EAAE,4BADW;AAEpBR,MAAAA,WAAW,EAAEA;AAFO,KAArB;AAIA,GAlBD,MAkBO,IAAIN,GAAG,CAACE,MAAJ,IAAc,KAAlB,EAAyB;AAC/B,UAAMP,IAAI,GAAGR,cAAc,EAA3B;AACAc,IAAAA,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACpBC,MAAAA,OAAO,EAAE,8BADW;AAEpBC,MAAAA,WAAW,EAAEpB;AAFO,KAArB;AAIA,GANM,MAMA;AACNM,IAAAA,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAArB;AACA;AACD;;AAED,eAAef,OAAf","sourcesContent":["import fs from \"fs\";\nimport path from \"path\";\n\nfunction getFeedbackFilePath() {\n\treturn path.join(process.cwd(), \"data\", \"feedback.json\");\n}\n\nexport function getAllFeedback() {\n\tconst filePath = getFeedbackFilePath();\n\tconst fileData = fs.readFileSync(filePath);\n\treturn JSON.parse(fileData);\n}\n\nexport function getFeedbackById(id){\n    const data = getAllFeedback();\n    const feedback = data.filter(f=>f.id == id);\n    return feedback;\n}\n\nfunction handler(req, res) {\n\tif (req.method == \"POST\") {\n\t\tconst email = req.body.email;\n\t\tconst text = req.body.text;\n\n\t\tconst newFeedback = {\n\t\t\tid: new Date().toISOString(),\n\t\t\temail: email,\n\t\t\ttext: text,\n\t\t};\n\n\t\tconst data = getAllFeedback();\n\t\tdata.push(newFeedback);\n\t\tconst filePath = getFeedbackFilePath();\n\t\tfs.writeFileSync(filePath, JSON.stringify(data));\n\t\tres.status(201).json({\n\t\t\tmessage: \"Success, data file updated\",\n\t\t\tnewFeedback: newFeedback,\n\t\t});\n\t} else if (req.method == \"GET\") {\n\t\tconst data = getAllFeedback();\n\t\tres.status(201).json({\n\t\t\tmessage: \"Success, data file retrieved\",\n\t\t\tallFeedback: data,\n\t\t});\n\t} else {\n\t\tres.status(200).json({ message: \"This works!\" });\n\t}\n}\n\nexport default handler;\n"]},"metadata":{},"sourceType":"module"}